<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Guía Pesquisa Nacional Ampliada</title>
<style>
  /* Estilos manteniendo la estructura visual, no modificados */
  body {
    font-family: "Segoe UI", sans-serif;
    background: #f7f9fc;
    margin: 0;
    padding: 0;
    color: #333;
  }
  .container {
    background: white;
    max-width: 900px;
    margin: 30px auto;
    padding: 25px 35px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
  h1 {
    text-align: center;
    color: #0056b3;
  }
  p.autor {
    text-align: center;
    font-style: italic;
    color: #444;
  }
  .input-group {
    margin: 12px 0;
  }
  label {
    font-weight: 600;
  }
  select,
  input[type="number"],
  input[type="date"] {
    width: 100%;
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
  }
  button {
    background: #007bff;
    border: none;
    color: white;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }
  button:hover {
    background: #0056b3;
  }
  .checkbox-group {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .result-box {
    margin-top: 25px;
    background: #eef6ff;
    padding: 20px;
    border-radius: 8px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  th,
  td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: center;
  }
  th {
    background: #0056b3;
    color: white;
  }
  .ok {
    color: green;
    font-weight: bold;
  }
  .pending {
    color: red;
    font-weight: bold;
  }
  .warning {
    color: orange;
    font-weight: bold;
  }
  .alerta {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeeba;
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Guía Pesquisa Nacional Ampliada</h1>
    <p class="autor">Creado por: Eu. Carlos Andrade</p>

    <div class="input-group">
      <label for="unidadIngreso">Unidad de Ingreso:</label>
      <select id="unidadIngreso">
        <option value="cuidados_basicos">Puerperio/Puericultura/Cuidados Básicos</option>
        <option value="uti_uci">UTI-UCI</option>
      </select>
    </div>

    <div class="input-group">
      <label for="edadGestacional">Edad Gestacional (semanas):</label>
      <input type="number" id="edadGestacional" min="20" max="45" value="38" />
    </div>

    <div class="input-group">
      <label for="pesoNacimiento">Peso de Nacimiento (gramos):</label>
      <input type="number" id="pesoNacimiento" min="500" max="6000" value="3000" />
    </div>

    <div id="condicionales-uti-uci" style="display: none;">
      <div class="input-group checkbox-group">
        <input type="checkbox" id="recibioM0" />
        <label for="recibioM0">¿Recibió Muestra 0 (M0)?</label>
      </div>
      <div class="input-group checkbox-group" id="m0-tiempo-group" style="display: none;">
        <input type="checkbox" id="m0Menos40h" />
        <label for="m0Menos40h">¿Muestra M0 fue tomada &lt; 40h de vida?</label>
      </div>
      <div class="input-group checkbox-group">
        <input type="checkbox" id="transfusionPreviaM1" />
        <label for="transfusionPreviaM1">¿Transfusión previa a M1?</label>
      </div>
      <div class="input-group checkbox-group">
        <input type="checkbox" id="pesquisaDudosaM1" />
        <label for="pesquisaDudosaM1">¿Pesquisa dudosa en M1?</label>
      </div>
    </div>

    <div id="condicionales-m3a" style="display: none;">
      <div class="input-group checkbox-group">
        <input type="checkbox" id="muestraPreviaAltaMenos10Dias" />
        <label for="muestraPreviaAltaMenos10Dias">¿Muestra previa al alta &lt; 10 días de vida?</label>
      </div>
      <div class="input-group checkbox-group">
        <input type="checkbox" id="transfusionMenos7Dias" />
        <label for="transfusionMenos7Dias">¿Transfusión &lt; 7 días desde muestra previa?</label>
      </div>
    </div>

    <div class="input-group checkbox-group">
      <input type="checkbox" id="sindromeDown" />
      <label for="sindromeDown">¿Diagnóstico o sospecha de Síndrome de Down?</label>
    </div>

    <div class="input-group">
      <label for="fechaNacimiento">Fecha de Nacimiento:</label>
      <input type="date" id="fechaNacimiento" />
    </div>

    <h3>Fechas de toma de muestras realizadas (si ya las tienen)</h3>
    <div class="input-group"><label for="fechaM0">Muestra 0 (M0):</label><input type="date" id="fechaM0" /></div>
    <div class="input-group"><label for="fechaM1">Muestra 1 (M1):</label><input type="date" id="fechaM1" /></div>
    <div class="input-group"><label for="fechaM2">Muestra 2 (M2):</label><input type="date" id="fechaM2" /></div>
    <div class="input-group"><label for="fechaM3">Muestra 3 (M3):</label><input type="date" id="fechaM3" /></div>

    <div class="input-group">
      <button id="calcularBtn">Calcular Recomendación</button>
    </div>

    <div class="result-box" id="resultados">
      <p>Introduce los datos y haz clic en "Calcular Recomendación".</p>
    </div>
  </div>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  const unidad = document.getElementById("unidadIngreso");
  const edadGestacional = document.getElementById("edadGestacional");
  const peso = document.getElementById("pesoNacimiento");
  const sindromeDown = document.getElementById("sindromeDown");
  const condUti = document.getElementById("condicionales-uti-uci");
  const condM3a = document.getElementById("condicionales-m3a");
  const recibioM0 = document.getElementById("recibioM0");
  const m0Tiempo = document.getElementById("m0-tiempo-group");
  const m0Menos40h = document.getElementById("m0Menos40h");
  const transfusionPreviaM1 = document.getElementById("transfusionPreviaM1");
  const pesquisaDudosaM1 = document.getElementById("pesquisaDudosaM1");
  const muestraPrevia = document.getElementById("muestraPreviaAltaMenos10Dias");
  const transfusionMenos7 = document.getElementById("transfusionMenos7Dias");
  const fechaM0 = document.getElementById("fechaM0");
  const fechaM1 = document.getElementById("fechaM1");
  const fechaM2 = document.getElementById("fechaM2");
  const fechaM3 = document.getElementById("fechaM3");
  const fechaNacimiento = document.getElementById("fechaNacimiento");
  const calcularBtn = document.getElementById("calcularBtn");
  const resultados = document.getElementById("resultados");

  // Evento al hacer click en el botón de calcular
  calcularBtn.addEventListener("click", () => {
    const fechaNac = new Date(fechaNacimiento.value);
    const fechaM2Date = new Date(fechaM2.value);
    const edadEnDias = Math.floor((fechaM2Date - fechaNac) / (1000 * 60 * 60 * 24)); 

    let muestra2Alert = "";
    let muestra2Ok = "OK";

    // Muestra 2 antes de 28 días
    if (edadEnDias < 28) {
      muestra2Alert = "⚠️ La muestra M2 fue tomada antes de los 28 días, favor corroborar corresponde por alta médica";
      muestra2Ok = "CORROBORAR";
    }

    // Condición para M3a
    let muestra3aOk = "No Aplica";
    if (muestraPrevia.checked && edadEnDias < 10 && (peso.value < 2500 || edadGestacional.value < 37 || transfusionMenos7.checked)) {
      muestra3aOk = "Muestra 3A generada";
    }

    resultados.innerHTML = ` 
      <div class="alerta">${muestra2Alert}</div>
      <p><strong>Muestra 2:</strong> ${muestra2Ok}</p>
      <p><strong>Muestra 3A:</strong> ${muestra3aOk}</p>
    `;
  });
});
  </script>
</body>
</html>

